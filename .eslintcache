[{"/Users/maolu/Desktop/react-epic/src/index.js":"1","/Users/maolu/Desktop/react-epic/src/App.js":"2","/Users/maolu/Desktop/react-epic/src/reportWebVitals.js":"3","/Users/maolu/Desktop/react-epic/src/components/Header.js":"4","/Users/maolu/Desktop/react-epic/src/components/Footer.js":"5","/Users/maolu/Desktop/react-epic/src/pages/Home.js":"6","/Users/maolu/Desktop/react-epic/src/pages/History.js":"7","/Users/maolu/Desktop/react-epic/src/pages/About.js":"8","/Users/maolu/Desktop/react-epic/src/components/Loading.js":"9","/Users/maolu/Desktop/react-epic/src/pages/Login.js":"10","/Users/maolu/Desktop/react-epic/src/stores/index.js":"11","/Users/maolu/Desktop/react-epic/src/stores/auth.js":"12","/Users/maolu/Desktop/react-epic/src/pages/Register.js":"13","/Users/maolu/Desktop/react-epic/src/models/index.js":"14","/Users/maolu/Desktop/react-epic/src/stores/user.js":"15","/Users/maolu/Desktop/react-epic/src/components/Uploader.js":"16","/Users/maolu/Desktop/react-epic/src/stores/image.js":"17","/Users/maolu/Desktop/react-epic/src/components/Tips.js":"18"},{"size":328,"mtime":1612227343854,"results":"19","hashOfConfig":"20"},{"size":1241,"mtime":1612236067379,"results":"21","hashOfConfig":"20"},{"size":362,"mtime":1611891540211,"results":"22","hashOfConfig":"20"},{"size":1966,"mtime":1612239905100,"results":"23","hashOfConfig":"20"},{"size":301,"mtime":1612226511695,"results":"24","hashOfConfig":"20"},{"size":442,"mtime":1612276235709,"results":"25","hashOfConfig":"20"},{"size":126,"mtime":1612053956854,"results":"26","hashOfConfig":"20"},{"size":120,"mtime":1612053950667,"results":"27","hashOfConfig":"20"},{"size":114,"mtime":1612056052019,"results":"28","hashOfConfig":"20"},{"size":2530,"mtime":1612239126510,"results":"29","hashOfConfig":"20"},{"size":397,"mtime":1612272315005,"results":"30","hashOfConfig":"20"},{"size":1264,"mtime":1612259901377,"results":"31","hashOfConfig":"20"},{"size":3145,"mtime":1612239028252,"results":"32","hashOfConfig":"20"},{"size":1196,"mtime":1612270768331,"results":"33","hashOfConfig":"20"},{"size":438,"mtime":1612237735222,"results":"34","hashOfConfig":"20"},{"size":3168,"mtime":1612279776903,"results":"35","hashOfConfig":"20"},{"size":969,"mtime":1612271313020,"results":"36","hashOfConfig":"20"},{"size":492,"mtime":1612276739166,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"qoel3w",{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"40"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"40"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"70"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"40"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"40"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"/Users/maolu/Desktop/react-epic/src/index.js",[],["81","82"],"/Users/maolu/Desktop/react-epic/src/App.js",[],"/Users/maolu/Desktop/react-epic/src/reportWebVitals.js",[],"/Users/maolu/Desktop/react-epic/src/components/Header.js",[],"/Users/maolu/Desktop/react-epic/src/components/Footer.js",[],"/Users/maolu/Desktop/react-epic/src/pages/Home.js",["83"],"import React from 'react'\nimport { observer } from 'mobx-react'\nimport { useStores } from '../stores'\nimport Uploader from '../components/Uploader'\nimport Tips from '../components/Tips'\n\nconst Home = observer(() => {\n  const { UserStore } = useStores()\n  const User = () => <>Hello {UserStore.currentUser.attributes.username}</>\n  return (\n    <>\n      <Tips>请先登录再上传</Tips>\n      <Uploader />\n    </>\n  )\n})\n\nexport default Home","/Users/maolu/Desktop/react-epic/src/pages/History.js",[],"/Users/maolu/Desktop/react-epic/src/pages/About.js",[],"/Users/maolu/Desktop/react-epic/src/components/Loading.js",[],"/Users/maolu/Desktop/react-epic/src/pages/Login.js",[],"/Users/maolu/Desktop/react-epic/src/stores/index.js",["84"],"import React, { createContext, useContext } from 'react'\nimport AuthStore from './auth'\nimport UserStore from './user'\nimport ImageStore from './image'\n\nconst context = createContext({\n  AuthStore,\n  UserStore,\n  ImageStore\n})\n\nwindow.store = {\n  AuthStore,\n  UserStore,\n  ImageStore\n}\n\n// 调用useStores方法 就会解构出context中的东西\nexport const useStores = () => useContext(context)","/Users/maolu/Desktop/react-epic/src/stores/auth.js",[],"/Users/maolu/Desktop/react-epic/src/pages/Register.js",[],"/Users/maolu/Desktop/react-epic/src/models/index.js",["85"],"import AV, { Query, User } from 'leancloud-storage'\n\nAV.init({\n  appId: \"R72DS9VJcKpeUsAoilodYc67-9Nh9j0Va\",\n  appKey: \"IFaaVRRCHQPkyw4g3VBwzD6T\",\n  serverURL: \"https://r72ds9vj.lc-cn-e1-shared.com\"\n})\n\n// 用户注册登录\nconst Auth = {\n  register(username, password) {\n    let user = new User()\n    user.setUsername(username)\n    user.setPassword(password)\n    return new Promise((resolve, reject) => {\n      user.signUp().then(loginUser => resolve(loginUser), error => reject(error))\n    })\n  },\n\n  login(username, password) {\n    return new Promise((resolve, reject) => {\n      User.logIn(username, password).then(loginUser => resolve(loginUser), error => reject(error));\n    })\n  },\n\n  logout() {\n    User.logOut()\n  },\n\n  getCurrentUser() {\n    return User.current()\n  }\n\n}\n\n\n// 上传图片\nconst Uploader = {\n  add(file, filename) {\n    const item = new AV.Object('Image')\n    const avFile = new AV.File(filename, file)\n    item.set('filename', filename)\n    item.set('owner', AV.User.current())\n    item.set('url', avFile)\n    return new Promise((resolve, reject) => {\n      item.save().then(serverFile => resolve(serverFile), err => reject(err))\n    })\n  }\n}\nexport { Auth, Uploader }",["86","87"],"/Users/maolu/Desktop/react-epic/src/stores/user.js",[],"/Users/maolu/Desktop/react-epic/src/components/Uploader.js",["88","89"],"import React, { useRef } from 'react'\nimport { observer, useLocalStore } from 'mobx-react'\nimport { useStores } from '../stores'\nimport { message, Upload } from 'antd'\nimport { InboxOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\n\nconst { Dragger } = Upload\n\nconst ImageShow = styled.div`\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n`\n\nconst H1 = styled.h1`\n  margin: 20px 0;\n  text-align: center;\n`\n\nconst Image = styled.img`\n  max-width: 300px;\n`\n\nconst ComponentUploader = observer(() => {\n\n  const { ImageStore, UserStore } = useStores()\n  const ref1 = useRef()\n  const ref2 = useRef()\n\n  const store = useLocalStore(() => ({\n    width: null,\n    setWidth(width) {\n      store.width = width\n    },\n    get widthStr() {\n      return store.width ? `/w/${store.width}` : ''\n    },\n    height: null,\n    setHeight(height) {\n      store.height = height\n    },\n    get heightStr() {\n      return store.height ? `/h/${store.height}` : ''\n    },\n    get fullStr() {\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\n    }\n  }))\n\n  const bindWidthChange = () => {\n    store.setWidth(ref1.current.value)\n  }\n\n  const bindHeightChange = () => {\n    store.setHeight(ref2.current.value)\n  }\n\n  const props = {\n    // 不显示列表\n    showUploadList: false,\n    beforeUpload: file => {\n      ImageStore.setFile(file)\n      ImageStore.setFilename(file.name)\n      if (UserStore.currentUser === null) {\n        message.warning('请先登录再上传！')\n        return false\n      }\n      ImageStore.upload().then((serverFile) => {\n        console.log('上传成功')\n        console.log(serverFile)\n      }).catch(() => {\n        console.log('上传失败')\n      })\n      return false\n    }\n  }\n\n  return (\n    <div>\n      <Dragger {...props}>\n        <p className=\"ant-upload-drag-icon\">\n          <InboxOutlined />\n        </p>\n        <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n        <p className=\"ant-upload-hint\">\n          Support for a single or bulk upload. Strictly prohibit from uploading company data or other\n          band files\n        </p>\n      </Dragger>\n      {\n        ImageStore.serverFile ? <ImageShow>\n          <H1>上传结果</H1>\n          <dl>\n            <dt>线上地址</dt>\n            <dd><a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a></dd>\n            <dt>文件名</dt>\n            <dd>{ImageStore.filename}</dd>\n            <dt>图片预览</dt>\n            <dd><Image src={ImageStore.serverFile.attributes.url.attributes.url} alt=\"\" /></dd>\n            <dt>更多尺寸</dt>\n            <dd>\n              <input ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度(可选)\" />\n              <input ref={ref2} onChange={bindHeightChange} placeholder=\"最大高度(可选)\" />\n            </dd>\n            <dd><a target=\"_blank\" href={store.fullStr} alt=\"\">{store.fullStr}</a></dd>\n\n          </dl>\n        </ImageShow> : null\n      }\n    </div>\n  )\n})\n\nexport default ComponentUploader","/Users/maolu/Desktop/react-epic/src/stores/image.js",["90"],"// 用于管理上传图片的数据\nimport { observable, action, makeObservable } from 'mobx'\nimport { Uploader } from '../models'\nimport UserStore from './user'\n\nclass ImageStore {\n  // 处理mobx6以上版本兼容导致渲染延时问题 \n  constructor() {\n    makeObservable(this)\n  }\n\n  // 属性\n  @observable filename = \"\"\n  @observable file = null\n  @observable isLoading = false\n  @observable serverFile = null\n\n  @action setFilename(newFilename) {\n    this.filename = newFilename\n  }\n\n  @action setFile(newFile) {\n    this.file = newFile\n  }\n\n  @action upload() {\n    this.isLoading = true\n    return new Promise((resolve, reject) => {\n      Uploader.add(this.file, this.filename).then(serverFile => {\n        this.serverFile = serverFile\n        resolve(serverFile)\n      }).catch(err => {\n        console.log('上传失败')\n        reject(err)\n      }).finally(() => {\n        this.isLoading = false\n      })\n    })\n  }\n}\n\nexport default new ImageStore()\n","/Users/maolu/Desktop/react-epic/src/components/Tips.js",[],{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":9,"column":9,"nodeType":"97","messageId":"98","endLine":9,"endColumn":13},{"ruleId":"95","severity":1,"message":"99","line":1,"column":8,"nodeType":"97","messageId":"98","endLine":1,"endColumn":13},{"ruleId":"95","severity":1,"message":"100","line":1,"column":14,"nodeType":"97","messageId":"98","endLine":1,"endColumn":19},{"ruleId":"91","replacedBy":"101"},{"ruleId":"93","replacedBy":"102"},{"ruleId":"103","severity":1,"message":"104","line":97,"column":17,"nodeType":"105","endLine":97,"endColumn":95},{"ruleId":"103","severity":1,"message":"104","line":107,"column":17,"nodeType":"105","endLine":107,"endColumn":64},{"ruleId":"95","severity":1,"message":"106","line":4,"column":8,"nodeType":"97","messageId":"98","endLine":4,"endColumn":17},"no-native-reassign",["107"],"no-negated-in-lhs",["108"],"no-unused-vars","'User' is assigned a value but never used.","Identifier","unusedVar","'React' is defined but never used.","'Query' is defined but never used.",["107"],["108"],"react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXOpeningElement","'UserStore' is defined but never used.","no-global-assign","no-unsafe-negation"]