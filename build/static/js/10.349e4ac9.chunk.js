(this["webpackJsonpreact-epic"]=this["webpackJsonpreact-epic"]||[]).push([[10],{238:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(0),i=n(59),a=n(110),l=n(25),s=n(11),u=n(57),b=n(233),j=n(91),o=n(149),h=n(237),d=n(240),g=n(26);function p(){var e=Object(l.a)(["\n  max-width: 300px;\n"]);return p=function(){return e},e}function f(){var e=Object(l.a)(["\n  margin: 20px 0;\n  text-align: center;\n"]);return f=function(){return e},e}function O(){var e=Object(l.a)(["\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n"]);return O=function(){return e},e}var x=b.a.Dragger,v=g.a.div(O()),m=g.a.h1(f()),w=g.a.img(p()),S=Object(i.a)((function(){var e=Object(u.a)(),t=e.ImageStore,n=e.UserStore,i=Object(c.useRef)(),l=Object(c.useRef)(),b=Object(s.d)((function(){return{width:null,setWidth:function(e){b.width=e},get widthStr(){return b.width?"/w/".concat(b.width):""},height:null,setHeight:function(e){b.height=e},get heightStr(){return b.height?"/h/".concat(b.height):""},get fullStr(){return t.serverFile.attributes.url.attributes.url+"?imageView2/0"+b.widthStr+b.heightStr}}})),g={showUploadList:!1,beforeUpload:function(e){return t.setFile(e),t.setFilename(e.name),null===n.currentUser?(j.b.warning("\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20\uff01"),!1):(window.file=e,/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type)?e.size>1048576?(j.b.error("\u56fe\u7247\u6700\u5927\u53ea\u80fd1M"),!1):(t.upload().then((function(e){console.log("\u4e0a\u4f20\u6210\u529f"),console.log(e)})).catch((function(){console.log("\u4e0a\u4f20\u5931\u8d25")})),!1):(j.b.error("\u53ea\u80fd\u4e0a\u4f20svg/png/jpg/jpeg/gif\u683c\u5f0f\u7684\u56fe\u7247"),!1))}};return Object(r.jsxs)("div",{children:[Object(r.jsx)(o.a,{tip:"\u4e0a\u4f20\u4e2d",spinning:t.isLoading,children:Object(r.jsxs)(x,Object(a.a)(Object(a.a)({},g),{},{children:[Object(r.jsx)("p",{className:"ant-upload-drag-icon",children:Object(r.jsx)(d.a,{})}),Object(r.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u56fe\u7247"}),Object(r.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301.svg/.png/.jpg/.jpeg/.gif\u683c\u5f0f\u7684\u56fe\u7247 \u56fe\u7247\u6700\u59271M"})]}))}),t.serverFile?Object(r.jsxs)(v,{children:[Object(r.jsx)(m,{children:"\u4e0a\u4f20\u7ed3\u679c"}),Object(r.jsxs)(h.b,{title:"\u4e0a\u4f20\u56fe\u7247\u4fe1\u606f\u5c55\u793a",bordered:!0,children:[Object(r.jsx)(h.b.Item,{label:"\u7ebf\u4e0a\u5730\u5740",span:3,children:Object(r.jsx)("a",{target:"_blank",href:t.serverFile.attributes.url.attributes.url,children:t.serverFile.attributes.url.attributes.url})}),Object(r.jsx)(h.b.Item,{label:"\u6587\u4ef6\u540d",span:3,children:t.filename}),Object(r.jsx)(h.b.Item,{label:"\u56fe\u7247\u9884\u89c8",span:3,children:Object(r.jsx)(w,{src:t.serverFile.attributes.url.attributes.url,alt:""})}),Object(r.jsxs)(h.b.Item,{label:"\u66f4\u591a\u5c3a\u5bf8",span:3,children:[Object(r.jsx)("input",{ref:i,onChange:function(){b.setWidth(i.current.value)},placeholder:"\u6700\u5927\u5bbd\u5ea6(\u53ef\u9009)"}),Object(r.jsx)("input",{ref:l,onChange:function(){b.setHeight(l.current.value)},placeholder:"\u6700\u5927\u9ad8\u5ea6(\u53ef\u9009)"})]}),Object(r.jsx)(h.b.Item,{label:"\u8bbe\u7f6e\u5927\u5c0f\u540e\u7ebf\u4e0a\u5730\u5740",span:3,children:Object(r.jsx)("a",{target:"_blank",href:b.fullStr,alt:"",children:b.fullStr})})]})]}):null]})}));function F(){var e=Object(l.a)(["\n  background: orange;\n  padding: 10px;\n  margin: 30px 0;\n  color: #fff;\n  border-radius: 5px;\n"]);return F=function(){return e},e}var I=g.a.div(F()),U=Object(i.a)((function(e){var t=e.children,n=Object(u.a)().UserStore;return Object(r.jsx)(r.Fragment,{children:n.currentUser?null:Object(r.jsx)(I,{children:t})})})),k=Object(i.a)((function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{children:"\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20"}),Object(r.jsx)(S,{})]})}));t.default=k}}]);
//# sourceMappingURL=10.349e4ac9.chunk.js.map